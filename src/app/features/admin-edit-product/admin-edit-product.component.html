@if (loading$ | async) {
<div class="loading-spinner-container mt-5">
  <mat-spinner [diameter]="50"></mat-spinner>
  <p>loading...</p>
</div>
} @else {
<form
  [formGroup]="form"
  (ngSubmit)="onSubmit()"
  class="d-flex flex-column mt-5"
>
  <div>
    <mat-form-field>
      <mat-label>{{ selectedProductLabel$ | async }}</mat-label>
      @if(products$ | async) {
      <mat-select formControlName="selectedProductId">
        @for (product of products$ | async; track product.id) {
        <mat-option [value]="product.id"
          >{{ product.brand }} {{ product.name }}</mat-option
        >
        }
      </mat-select>
      }
    </mat-form-field>
  </div>
  <div class="mt-5">
    <div>
      <mat-form-field>
        <mat-label>Kategorie</mat-label>
        <input matInput type="text" formControlName="category" />
        <!-- @if (form.controls['rating']?.hasError('required')) {
                <mat-error>
                    Kategorie ist erforderlich!
                </mat-error>
            } -->
      </mat-form-field>
      <mat-form-field>
        <mat-label>Marke</mat-label>
        <input matInput type="text" formControlName="brand" />
      </mat-form-field>
      <mat-form-field>
        <mat-label>Produkt Name</mat-label>
        <input matInput type="text" formControlName="name" />
      </mat-form-field>
      <mat-form-field>
        <mat-label>Preis</mat-label>
        <input matInput type="number" min="0" formControlName="productPrice" />
      </mat-form-field>
      <mat-form-field>
        <mat-label>Basis Preis</mat-label>
        <input matInput type="text" min="0" formControlName="basePrice" />
      </mat-form-field>
      <mat-form-field>
        <mat-label>Produkt spezifikation</mat-label>
        <input matInput type="text" formControlName="productSpecification" />
      </mat-form-field>
      <mat-form-field>
        <mat-label>Anzahl Bewertungen</mat-label>
        <input
          matInput
          type="number"
          min="0"
          formControlName="numberOfRating"
        />
      </mat-form-field>
      <mat-form-field>
        <mat-label>Bild Quelle</mat-label>
        <input matInput type="text" formControlName="imgSrc" />
      </mat-form-field>
      <mat-form-field>
        <mat-label>Bewertung (1-5)</mat-label>
        <input
          matInput
          type="number"
          min="0"
          max="5"
          formControlName="rating"
        />
      </mat-form-field>
    </div>
    <button mat-flat-button type="submit">Speichern</button>
  </div>
</form>
}
